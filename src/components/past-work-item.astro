---
import { IconArrowUpRight } from "@tabler/icons-react";

import ResponsibilityIcon from "@/components/responsibility-icon.astro";
import { type Work } from "@/config/site";
import { cn } from "@/styles/utils";

type Props = Work;

const { name, summary, externalUrl, responsibilityType } = Astro.props;

const Container = externalUrl ? "a" : "div";
const Name = externalUrl ? "a" : "h4";
---

<div class="flex flex-col gap-1 md:hidden">
  <span class="flex items-center justify-between gap-6 md:justify-start">
    <Name
      href={externalUrl}
      target="_blank"
      rel="noopener noreferrer"
      class={cn(
        "inline-flex items-center font-serif text-2xl font-medium decoration-2 underline-offset-4",
        externalUrl && "underline",
      )}
    >
      {name}
      {
        externalUrl && (
          <IconArrowUpRight
            size={20}
            className="ml-1 flex-shrink-0 text-foreground/80"
          />
        )
      }
    </Name>
    <ResponsibilityIcon type={responsibilityType} />
  </span>

  <p class="tracking-tight text-muted-foreground md:text-lg">{summary}</p>
</div>

<Container
  href={externalUrl}
  target="_blank"
  rel="noopener noreferrer"
  class="hidden rounded-lg border border-input bg-background px-7 py-6 shadow-sm ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground md:flex md:flex-col md:gap-1"
>
  <span class="flex items-center justify-between gap-5 md:justify-start">
    <h4 class={cn("inline-flex items-center font-serif text-2xl font-medium")}>
      {name}
    </h4>
    <ResponsibilityIcon type={responsibilityType} />
  </span>

  <p class="text-muted-foreground md:text-base">{summary}</p>
</Container>
